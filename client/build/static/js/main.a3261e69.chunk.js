(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),i=(a(56),a(5)),s=function(e){return{type:"INCREMENT",payload:e}},l=a(9),u=a.n(l),m=a(11),d=function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.user){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,JSON.parse(localStorage.user);case 4:a=e.sent,t({type:"LOGIN"}),t({type:"SET_USER",payload:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.c)((function(e){return e.counter})),t=Object(i.c)((function(e){return e.isLogged})),a=Object(i.c)((function(e){return e.user})),n=Object(i.b)();return r.a.createElement("div",null,r.a.createElement("h2",null,"From TestComponent.js"),r.a.createElement("h3",null,"Counter: ",e),r.a.createElement("button",{onClick:function(){return n(s(5))}},"+"),r.a.createElement("button",{onClick:function(){return n({type:"DECREMENT",payload:5})}},"-"),r.a.createElement("h4",null,t?"You are logged in.":"Please sign in."),r.a.createElement("button",{onClick:function(e){e.preventDefault(),n(t?{type:"LOGOUT"}:{type:"LOGIN"})}},t?"Log out":"Log in"),a.username)},E=a(115),f=a(116),b=a(117),O=a(13),p=(a(62),a(114)),v=a(10),C=(a(63),function(e){var t=Object(i.b)(),a=Object(i.c)((function(e){return e.user})),n=a.first_name,c=(a.last_name,a.username,a.email,Object(v.f)().push);return r.a.createElement("div",{className:"NavDashboard__container"},r.a.createElement("span",{className:"NavDashboard__welcome-span"},"Welcome, ".concat(n)),r.a.createElement(p.a,{className:"NavDashboard__button",onClick:function(e){e.preventDefault(),localStorage.clear(),t({type:"LOGOUT"}),t({type:"CLEAR_USER"}),window.location.reload(),c("/")}},"logout"))}),S=function(){var e=Object(i.c)((function(e){return e.isLogged}));return r.a.createElement(E.a,{className:"Navbar__container"},e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(b.a,{className:"Navbar__li",tag:O.b,to:"/home"},"Home")),r.a.createElement(f.a,null,r.a.createElement(b.a,{className:"Navbar__li",tag:O.b,to:"/search-users"},"Find Users")),r.a.createElement(f.a,null,r.a.createElement(b.a,{className:"Navbar__li",tag:O.b,to:"/my-followers"},"My Followers")),r.a.createElement(f.a,null,r.a.createElement(b.a,{className:"Navbar__li",tag:O.b,to:"/following"},"Following"))),!e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(b.a,{className:"Navbar__li",tag:O.b,to:"/login"},"Login")),r.a.createElement(f.a,null,r.a.createElement(b.a,{className:"Navbar__li",tag:O.b,to:"/signup"},"Register"))),e&&r.a.createElement(f.a,null,r.a.createElement(C,null)))},h=a(2),T=a(8),g=a.n(T),P=a(118),j=a(119),N=a(120),w=a(121),A=a(122),D=a(123),R=a(124),y=a(125),L=a(126),H=(a(82),a(24)),U=a(17),k=function(e){var t=Object(n.useState)({}),a=Object(h.a)(t,2),r=a[0],c=a[1];return[r,function(e){e.persist();var t=e.target,a=t.name,n=t.value;c((function(e){return Object(U.a)(Object(U.a)({},e),{},Object(H.a)({},a,n))}))},function(t){t.preventDefault(),e()},function(){var e={};for(var t in r)e[t]="";c(e)}]},W=function(){var e=Object(n.useState)({first_name:"",last_name:"",username:"",email:"",password:"",_password:""}),t=Object(h.a)(e,2);return{error:t[0],setError:t[1]}},I={USERNAME_MAX_LENGTH:12,PASSWORD_MIN_LENGTH:6},K=I.USERNAME_MAX_LENGTH,F=I.PASSWORD_MIN_LENGTH,x=function(e){if(!e)return!1;return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},M=function(e){return!!e&&(!(e.length>K)&&/^[a-zA-Z0-9]+$/.test(e))},V=function(e){return!!e&&(!(e.length<F)&&/^[a-zA-Z0-9]+$/.test(e))},B={isValidEmail:x,isValidUsername:M,isValidPassword:V,isEmptyObj:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},isValidSubmission:function(e){var t={};return!e.username&&(t.username="Username is required."),!e.first_name&&(t.first_name="First name is required."),!e.last_name&&(t.last_name="Last name is required."),!e.email&&(t.email="Email is required."),!e.password&&(t.password="Password is required."),e.username&&!M(e.username)&&(t.username="Invalid username."),e.email&&!x(e.email)&&(t.email="Invalid email."),e.password&&!V(e.password)&&(t.password="Invalid password."),e._password&&e.password!==e._password&&(t._password="Password does not match."),t},inputWithinRange:function(e,t,a){if(e)return e.length>=t&&e.length<=a}},G=function(e,t){var a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"login";g.a.post(a,e).then(function(){var e=Object(m.a)(u.a.mark((function e(a){var n,r,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.data,r=n.accessToken,c=n.user,e.next=3,JSON.stringify(c);case 3:o=e.sent,localStorage.setItem("accessToken",r),localStorage.setItem("user",o),window.location.reload(),t();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),t(null,e)}))},q=I.USERNAME_MAX_LENGTH,z=I.PASSWORD_MIN_LENGTH,J=B.isValidEmail,X=B.isValidUsername,Y=B.isValidPassword,$=B.isEmptyObj,Q=B.isValidSubmission,Z=B.inputWithinRange,ee=function(){var e=W(),t=e.error,a=e.setError,c=k((function(){console.log("Validating...",s);var e=Q(s);if(!$(e))return a(e);!function(){console.log("Registering...",s);var e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"users/newUser";b(!0),g.a.post(e,s).then((function(e){var t=e.data;b(!1),console.log("Register successful:",t);var a={email:s.email,password:s.password};G(a,(function(){H({type:"LOGIN"}),d(H),T("/home")}))})).catch((function(e){b(!1);var t=e.response.data;console.log("Failed to register:",t),a(t)}))}()})),o=Object(h.a)(c,4),s=o[0],l=o[1],u=o[2],m=o[3],_=Object(n.useState)(!1),E=Object(h.a)(_,2),f=E[0],b=E[1],O=Object(n.useState)(null),C=Object(h.a)(O,2),S=C[0],T=C[1],H=Object(i.b)();return S?r.a.createElement(v.a,{to:S}):r.a.createElement("div",{className:"RegistrationForm__form-container"},r.a.createElement(P.a,{onSubmit:u},r.a.createElement(j.a,null,r.a.createElement(N.a,null,r.a.createElement(w.a,null,r.a.createElement(A.a,{for:"first_name"},"First Name:"),r.a.createElement(D.a,{name:"first_name",type:"text",value:s.first_name||"",onChange:l,valid:s.first_name&&!0,invalid:t.first_name}),r.a.createElement(R.a,{invalid:!0},t.first_name))),r.a.createElement(N.a,null,r.a.createElement(w.a,null,r.a.createElement(A.a,{for:"last_name"},"Last Name:"),r.a.createElement(D.a,{name:"last_name",type:"text",value:s.last_name||"",onChange:l,valid:s.last_name&&!0,invalid:t.last_name}),r.a.createElement(R.a,{invalid:!0},t.last_name)))),r.a.createElement(w.a,null,r.a.createElement(A.a,{for:"username"},"Username:"),r.a.createElement(D.a,{name:"username",type:"text",value:s.username||"",onChange:l,valid:Z(s.username,1,q),invalid:s.username&&!X(s.username)||t.username}),r.a.createElement(R.a,{invalid:!0},t.username),r.a.createElement(y.a,null,s.username&&X(s.username)?"Remaining characters: ".concat(q-s.username.length):"Usernames must be within ".concat(q," alphanumeric characters"))),r.a.createElement(w.a,null,r.a.createElement(A.a,{for:"email"},"E-mail:"),r.a.createElement(D.a,{name:"email",type:"email",value:s.email||"",onChange:l,valid:J(s.email),invalid:s.email&&!J(s.email)||t.email}),r.a.createElement(R.a,{invalid:!0},t.email)),r.a.createElement(j.a,null,r.a.createElement(N.a,null,r.a.createElement(w.a,null,r.a.createElement(A.a,{for:"password"},"Password:"),r.a.createElement(D.a,{name:"password",type:"password",value:s.password||"",onChange:l,valid:Y(s.password),invalid:s.password&&!Y(s.password)||t.password}),r.a.createElement(R.a,{invalid:!0},t.password),r.a.createElement(y.a,null,"Passwords must be at least ".concat(z," characters long")))),r.a.createElement(N.a,null,r.a.createElement(w.a,null,r.a.createElement(A.a,{for:"_password"},"Confirm:"),r.a.createElement(D.a,{name:"_password",type:"password",value:s._password||"",onChange:l,valid:Y(s.password)&&s.password===s._password,invalid:s.password!==s._password&&Y(s.password)||t._password}),r.a.createElement(R.a,{invalid:!0},t._password),r.a.createElement(y.a,null,"Please re-enter your password")))),r.a.createElement(p.a,{disabled:f,block:!0,type:"submit",color:$(Q(s))?"success":"secondary"},f?r.a.createElement(L.a,{size:"sm"}):"Register")),r.a.createElement(p.a,{className:"RegistrationForm__form-resetBtn",disabled:f,block:!0,color:"warning",onClick:function(e){e.preventDefault(),m(),a({})}},"Reset Form"))},te=a(50),ae=function(e){var t=e.children,a=Object(te.a)(e,["children"]);return r.a.createElement(v.b,Object.assign({},a,{render:function(){return localStorage.getItem("accessToken")?t:r.a.createElement(v.a,{to:"/welcome"})}}))},ne=(a(83),function(e){var t=e.setQueryHits,a=e.setIsLoading,n=k((function(){if(!o.query)return;console.log("submitting",o.query);var e=o.query,n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"search?name=".concat(e);a(!0),g.a.get(n).then((function(e){a(!1),t(e.data.queryHits)})).catch((function(e){return console.log(e)}))})),c=Object(h.a)(n,4),o=c[0],i=c[1],s=c[2];c[3];return r.a.createElement("form",{className:"UserSearchBar__form",onSubmit:s},r.a.createElement("div",{className:"UserSearchBar__input-group"},r.a.createElement("input",{name:"query",type:"text",value:o.query||"",onChange:i,className:"UserSearchBar__input-field",placeholder:"find other users..."}),r.a.createElement(p.a,{className:"UserSearchBar__button",type:"submit"},"Search")))}),re=a(25),ce=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"users/".concat(t),g.a.get(n).then((function(e){a(e.data[0])})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),oe=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"habits/".concat(t),g.a.get(n).then((function(e){a(e.data.length)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ie=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"habits/".concat(t),g.a.get(n).then((function(e){a(e.data)})).catch((function(e){console.log(e),a(null,e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),se=function(){var e=Object(m.a)(u.a.mark((function e(t,a,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"habits/".concat(t,"/").concat(a),g.a.get(r).then((function(e){var t=e.data.map((function(e){return e.completed_at.split("T")[0]}));n(t)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),le=function(e,t){for(var a=t,n=e.toString();n.length<a;)n="0"+n;return n},ue=function(e){if(e){var t=e.split("T")[0].split("-"),a=Object(h.a)(t,3),n=a[0],r=a[1],c=a[2];return"".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][r-1]," ").concat(c,", ").concat(n)}},me=function(e,t){return e>1?t+"s":t},de={headers:{authorization:"Bearer ".concat(localStorage.accessToken)}},_e={authorization:"Bearer ".concat(localStorage.accessToken)},Ee=function(e){var t=Object(n.useState)(e),a=Object(h.a)(t,2),r=a[0],c=a[1];return[r,{value:r,onChange:function(e){return c(e.target.value)}},function(){return c(e)}]},fe=(a(84),function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"habits/newHabit",r={habit:t},e.prev=2,e.next=5,g.a.post(n,r,de);case 5:c=e.sent,a(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("WF",e.t0);case 12:case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),be=function(){var e=Object(m.a)(u.a.mark((function e(t,a,n){var r,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Updating habit:",t),r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"habits",c={habit_id:t,habit:a},e.prev=3,e.next=6,g.a.put(r,c,de);case 6:o=e.sent,n(o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Oe=function(e){if(e)return e.trim().replace(/\s\s+/g," ")},pe=function(e){var t=e.title,a=e.description;return t?function(e){return/^[a-z\d\-_\s]+$/i.test(e)}(t)?{err:null,habit:{title:Oe(t),description:Oe(a)}}:{err:"Invalid characters used."}:{err:"Please enter a title."}},ve=function(e){var t=e.description,a=e.title,n=e.setEditMode,c=e.habit_id,o=e.setErr,l=e.setSuccess,u=Ee(a),m=Object(h.a)(u,3),d=m[0],_=m[1],E=(m[2],Ee(t)),f=Object(h.a)(E,3),b=f[0],O=f[1],v=(f[2],Object(i.b)());return r.a.createElement("div",{className:"EditHabitForm"},r.a.createElement(p.a,{className:"EditHabitForm__close-btn",onClick:function(){return n(!1)},close:!0}),r.a.createElement("form",{autoComplete:"off",type:"submit",onSubmit:function(e){e.preventDefault();var t=pe({title:d,description:b});if(t.err)return o(t.err),void setTimeout((function(){o("")}),2e3);be(c,{title:d,description:b},(function(e){v(s(1)),l(e.data.msg),setTimeout((function(){l("")}),2e3),n(!1)}))}},r.a.createElement("input",{autoFocus:!0,name:"title",onChange:_.onChange,value:d,className:"EditHabitForm__title"}),r.a.createElement("textarea",{name:"description",onChange:O.onChange,value:b||"",className:"EditHabitForm__description",placeholder:"edit mode..."}),r.a.createElement("button",{type:"submit",className:"EditHabitForm__save-btn"},"save")))},Ce=function(e,t){var a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"follows/".concat(e);g.a.get(a).then((function(e){t(e.data)})).catch((function(e){console.log(e),t(null,e)}))},Se=function(e,t){var a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"follows/following/".concat(e);g.a.get(a).then((function(e){t(e.data)})).catch((function(e){console.log(e),t(null,e)}))},he=(a(85),function(e){var t=e.userObj,a=t.user_id,c=t.avatar_url,o=t.created_at,l=t.email,u=t.first_name,m=t.last_name,d=(t.is_active,t.username),_=Object(n.useState)(""),E=Object(h.a)(_,2),f=E[0],b=E[1],v=Object(n.useState)(""),C=Object(h.a)(v,2),S=C[0],T=C[1],P=Object(n.useState)(!1),j=Object(h.a)(P,2),N=j[0],w=j[1],A=Object(n.useState)(!1),D=Object(h.a)(A,2),R=D[0],y=D[1],L=Object(i.c)((function(e){return e.counter})),H=Object(i.c)((function(e){return e.user})),U=Object(i.b)();Object(n.useEffect)((function(){Se(H.user_id,(function(e){var t,n=Object(re.a)(e);try{for(n.s();!(t=n.n()).done;){if(t.value.user_id===a)return y(!0)}}catch(r){n.e(r)}finally{n.f()}y(!1)}))}),[L]),Object(n.useEffect)((function(){var e=window.location.href.split("/"),t=e[e.length-1],n=a||t;oe(n,(function(e){b(e)})),Ce(n,(function(e){T(e.length)}))}),[L]);return r.a.createElement("div",{className:"UserCard__container"},r.a.createElement(O.b,{to:"/users/".concat(a)},r.a.createElement("div",{className:"UserCard__left-container"},r.a.createElement("img",{className:"UserCard__avatar",src:c}),r.a.createElement("span",{className:"UserCard__username"},"@",d))),r.a.createElement("div",{className:"UserCard__right-container"},r.a.createElement("span",{onClick:function(){U(s(1))},className:"UserCard__full-name"},r.a.createElement(O.b,{to:"/users/".concat(a)},u," ",m)),r.a.createElement("span",{className:"UserCard__email"},"Email: ",l),r.a.createElement("span",{className:"UserCard__habit-count"},"Habits: ",f),r.a.createElement("span",{className:"UserCard__follower-count"},"Followers: ",S),r.a.createElement("span",{className:"UserCard__created-at"},"Member since ",ue(o)),H.user_id!==a&&r.a.createElement(p.a,{color:R?"info":"secondary",disabled:N,onClick:function(e){e.preventDefault(),N||(w(!0),R?function(e,t){var a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"follows/".concat(e);g.a.delete(a,{headers:_e}).then((function(e){t(e)})).catch((function(e){console.log(e.message),t(null,e)}))}(a,(function(e,t){w(!1),t||U(s(1))})):function(e,t){var a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"follows",n={target_user_id:e};g.a.post(a,n,de).then((function(e){t(e)})).catch((function(e){return console.log(e)}))}(a,(function(e,t){w(!1),t||U(s(1))})))},className:"UserCard__follow-button"},R?"Unfollow":"Follow")))}),Te=(a(86),function(){return Object(i.c)((function(e){return e.isLogged}))?r.a.createElement("div",{className:"SignUpPage"},"You are already logged in!"):r.a.createElement("section",{className:"SignUpPage"},r.a.createElement(ee,null))}),ge=(a(87),a(128)),Pe=(a(88),function(){var e=Object(n.useState)(null),t=Object(h.a)(e,2),a=t[0],c=t[1],o=k((function(){G(l,(function(e,t){if(t)return b(!0),void setTimeout((function(){b(!1)}),3e3);d(O),O({type:"LOGIN"}),c("/home")}))})),s=Object(h.a)(o,4),l=s[0],u=s[1],m=s[2],_=(s[3],Object(n.useState)(!1)),E=Object(h.a)(_,2),f=E[0],b=E[1],O=Object(i.b)();return Object(i.c)((function(e){return e.isLogged}))?r.a.createElement("div",{className:"LoginPage"},"You are already logged in!"):a?r.a.createElement(v.a,{to:a}):r.a.createElement("section",{className:"LoginPage"},r.a.createElement("div",{className:"LoginPage__form-container"},r.a.createElement("h1",null,"Login"),r.a.createElement(P.a,{formNoValidate:!0,onSubmit:m},r.a.createElement(w.a,{className:"mb-2 mr-sm-2 mb-sm-0"},r.a.createElement(A.a,{for:"email",className:"mr-sm-2"},"Email:"),r.a.createElement(D.a,{onChange:u,type:"email",name:"email",id:"email"})),r.a.createElement(w.a,{className:"mb-2 mr-sm-2 mb-sm-0"},r.a.createElement(A.a,{for:"password",className:"mr-sm-2"},"Password:"),r.a.createElement(D.a,{onChange:u,type:"password",name:"password",id:"password"})),r.a.createElement(p.a,{color:"primary",className:"LoginPage__submit-btn"},"Login")),f&&r.a.createElement(ge.a,{color:"danger",className:"LoginPage__error"},"Invalid email or password.")))}),je=function(){var e=Object(i.c)((function(e){return e.isLogged})),t=Object(i.c)((function(e){return e.user}));return e?r.a.createElement("div",{className:"WelcomePage"},r.a.createElement("h1",{className:"WelcomePage__site-banner"},"Welcome to Habitbook, ".concat(t.username,"!"))):r.a.createElement("div",null,r.a.createElement("h1",{className:"WelcomePage__site-banner"},"Welcome to Habitbook!"),r.a.createElement("section",{className:"WelcomePage__form-section"},r.a.createElement("div",null,r.a.createElement("h4",null,"Welcome back! Please sign in."),r.a.createElement(Pe,null)),r.a.createElement("div",null,r.a.createElement("h4",null,"New user? Register here!"),r.a.createElement(Te,null))))},Ne=(a(96),function(e){var t=k((function(){var e=pe(c);if(e.err)return g(e.err);v(!0),fe(e.habit,(function(e){console.log(e.data.msg),u(),E(e.data.msg),v(!1),g(""),j(s(1)),setTimeout((function(){E("")}),2e3)}))})),a=Object(h.a)(t,4),c=a[0],o=a[1],l=a[2],u=a[3],m=Object(n.useState)(""),d=Object(h.a)(m,2),_=d[0],E=d[1],f=Object(n.useState)(!1),b=Object(h.a)(f,2),O=b[0],v=b[1],C=Object(n.useState)(""),S=Object(h.a)(C,2),T=S[0],g=S[1],j=Object(i.b)();return r.a.createElement("div",{className:"NewHabitForm__container"},r.a.createElement("h4",null,"Create a new habit!"),r.a.createElement(P.a,{onSubmit:l},r.a.createElement(w.a,null,r.a.createElement(A.a,{for:"title"},"Title:"),r.a.createElement(D.a,{value:c.title||"",onChange:o,id:"title",name:"title",type:"text"})),r.a.createElement(w.a,null,r.a.createElement(A.a,{for:"description"},"Description:"),r.a.createElement(D.a,{value:c.description||"",onChange:o,id:"textarea",name:"description",type:"textarea"})),r.a.createElement(p.a,{disabled:O,type:"submit"},O?r.a.createElement(L.a,{size:"sm"}):"Submit")),_&&r.a.createElement(ge.a,{className:"NewHabitForm__form-feedback",color:"success"},_),T&&r.a.createElement(ge.a,{className:"NewHabitForm__error",color:"danger"},T))}),we=(a(97),function(){return r.a.createElement("section",{className:"NewHabit__section"},r.a.createElement(Ne,null))}),Ae=a(7),De=a.n(Ae),Re=a(49),ye=(a(98),function(e){var t=le(e.getFullYear(),2),a=le(e.getMonth()+1,2),n=le(e.getDate(),2);return"".concat(t,"-").concat(a,"-").concat(n)});var Le=function(){var e=Object(m.a)(u.a.mark((function e(t,a,n,r){var c,o,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"completed_at",o={date:t,user_id:a,habit_id:n},e.prev=2,e.next=5,g.a.post(c,o,de);case 5:i=e.sent,s=i.data,r(s),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0.message),r(null,e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),He=function(e,t,a){var n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"completed_at/".concat(e,"/").concat(t);g.a.delete(n,{headers:_e}).then((function(e){a(e)})).catch((function(e){return console.log(e)}))};var Ue=function(e){var t=e.completedAt,a=e.user_id,c=e.habit_id,o=e.setErr,l=e.setSuccess,d=Object(n.useState)(new Date),_=Object(h.a)(d,2),E=_[0],f=(_[1],Object(n.useState)(!1)),b=Object(h.a)(f,2),O=b[0],p=b[1],v=Object(n.useState)(0),C=Object(h.a)(v,2),S=C[0],T=C[1],g=Object(i.b)(),P=Object(i.c)((function(e){return e.user}));Object(n.useEffect)((function(){T(function(e){if(console.log("Calculating longest streak...",e),0===e.length)return 0;if(1===e.length)return 1;for(var t=1,a=0,n=1;n<e.length;n++){var r=e[n-1].split("-"),c=Object(h.a)(r,3),o=(c[0],c[1],c[2]),i=e[n].split("-"),s=Object(h.a)(i,3),l=(s[0],s[1],s[2]);parseInt(l)-1===parseInt(o)?(console.log("consecutive!"),t++):(t>a&&(a=t),t=1)}return t>a&&(a=t),a}(t))}),[t]);var j,N=function(){var t=Object(m.a)(u.a.mark((function t(n,r){var i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!O){t.next=2;break}return t.abrupt("return");case 2:if(i=ye(n),P.user_id===e.user_id){t.next=6;break}return o("This habit does not belong to you."),t.abrupt("return",console.log("This habit does not belong to you."));case 6:if(!r.target.className.includes("CalendarComponent__selected")){t.next=11;break}return p(!0),He(c,i,(function(e){p(!1),g(s(1))})),t.abrupt("return",console.log("Already marked blue."));case 11:if(!(ye(n)>ye(new Date))){t.next=17;break}return o(""),l(""),o("Cannot set future date."),setTimeout((function(){o("")}),2e3),t.abrupt("return");case 17:console.log("Requesting new completed_at..."),p(!0),Le(i,a,c,(function(e,t){if(t)return p(!1);g(s(1)),l("Day marked complete!"),p(!1),setTimeout((function(){l("")}),2e3)}));case 20:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return P.user_id!==e.user_id&&(j="unclickable"),r.a.createElement("section",{className:"CalendarComponent ".concat(j," ").concat(O&&"unclickable")},r.a.createElement("div",{className:"CalendarComponent__calendar-container"},r.a.createElement(Re.a,{value:E,onClickDay:N,tileClassName:function(e){var a=e.date;if("month"===e.view){var n=ye(a),r=ye(new Date);if(n===r&&t.includes(n))return"".concat("CalendarComponent__today"," ").concat("CalendarComponent__selected");if(t.includes(n))return"CalendarComponent__selected";if(n===r)return"CalendarComponent__today"}}})),O&&r.a.createElement(L.a,{className:"CalendarComponent__spinner"}),r.a.createElement("span",{className:"CalendarComponent__streak-span"},"Longest streak: ",S))},ke=function(){var e=Object(m.a)(u.a.mark((function e(t,a,n,r){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"habits/delete/".concat(a,"/").concat(n),g.a.delete(c,{headers:_e}).then((function(e){r(s(1))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),We=function(){var e=Object(m.a)(u.a.mark((function e(t,a,n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"habits/likes/".concat(t,"/").concat(a),e.next=4,g.a.get(r);case 4:c=e.sent,n(c.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Ie=function(e,t){var a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"comments/".concat(e);g.a.get(a).then((function(e){t(e.data)})).catch((function(e){return console.log(e)}))},Ke=(a(99),a(100),function(e){var t=e.setIsDeleteMode,a=e.handleDeleteComment;return r.a.createElement("div",{className:"CommentDeleteConfirmation"},r.a.createElement("h3",{className:"CommentDeleteConfirmation__prompt"},"Delete comment?"),r.a.createElement("div",{className:"CommentDeleteConfirmation__button-container"},r.a.createElement(p.a,{onClick:function(e){e.preventDefault(),a()},color:"danger"},"Delete"),r.a.createElement(p.a,{onClick:function(e){e.preventDefault(),t(!1)},color:"light"},"Cancel")))}),Fe=(a(101),function(e){var t=e.comment,a=e.setIsEditMode,c=e.setTempComment,o=e.setTempEdited,i=Object(n.useState)(t.content),s=Object(h.a)(i,2),l=s[0],u=s[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e,t,a){var n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"comments/updateComment",r={content:e,comment_id:t};g.a.put(n,r,de).then((function(e){a(e.data.content)})).catch((function(e){console.error(e.message),a(null,e.message)}))}(l,t.comment_id,(function(e,t){t||(c(e),o(!0),a(!1))}))},className:"CommentEditForm"},r.a.createElement("input",{autoFocus:!0,onChange:function(e){u(e.target.value)},value:l,className:"CommentEditForm__input"}))}),xe=function(e){var t=e.comment,a=e.setComments,c=t.comment_id,o=t.comment_by,l=t.habit_id,u=t.created_at,m=t.content,d=t.is_edited,_=Object(n.useState)({}),E=Object(h.a)(_,2),f=E[0],b=E[1],v=Object(n.useState)(!1),C=Object(h.a)(v,2),S=C[0],T=C[1],P=Object(n.useState)(!1),j=Object(h.a)(P,2),N=j[0],w=j[1],A=Object(n.useState)(!1),D=Object(h.a)(A,2),R=D[0],y=D[1],L=Object(n.useState)(m),H=Object(h.a)(L,2),U=H[0],k=H[1],W=Object(n.useState)(d),I=Object(h.a)(W,2),K=I[0],F=I[1],x=Object(i.b)(),M=Object(i.c)((function(e){return e.user}));Object(n.useEffect)((function(){ce(o,(function(e){b(e)})),o===M.user_id&&T(!0)}),[]);return r.a.createElement("div",{className:"CommentCard"},r.a.createElement("div",{className:"CommentCard__avatar-container"},r.a.createElement("img",{className:"CommentCard__avatar",src:f.avatar_url}),r.a.createElement("span",{className:"CommentCard__username"},"@",f.username)),r.a.createElement("div",{className:"vertical-split"},r.a.createElement("div",{className:"CommentCard__content-container"},r.a.createElement("span",{className:"CommentCard__full-name"},r.a.createElement(O.b,{onClick:function(){x(s(1))},to:"/users/".concat(o)},"".concat(f.first_name," ").concat(f.last_name))),r.a.createElement("div",{className:"CommentCard__content"},U,R&&r.a.createElement(Fe,{setTempEdited:F,setTempComment:k,setIsEditMode:y,comment:t}))),r.a.createElement("div",{className:"CommentCard__buttons-container"},K&&r.a.createElement("span",{className:"CommentCard__edited"},"(edited)"),r.a.createElement("span",{className:"CommentCard__created-at"},function(e){var t=Math.floor((new Date-e)/1e3),a=Math.floor(t/31536e3);return a>1?a+" years":(a=Math.floor(t/2592e3))>1?a+" months":(a=Math.floor(t/86400))>1?a+" days":(a=Math.floor(t/3600))>1?a+" hours":(a=Math.floor(t/60))>1?a+" minutes":Math.floor(t)+" seconds"}(new Date(u))," ago"),S&&!N&&r.a.createElement(p.a,{onClick:function(e){e.preventDefault(),w(!0)},color:"danger",className:"CommentCard__delete-comment"},"delete"),S&&r.a.createElement(p.a,{onClick:function(e){e.preventDefault(),y(!R)},className:"CommentCard__edit-comment",color:R?"light":"primary"},R?"cancel":"edit"))),N&&r.a.createElement(Ke,{handleDeleteComment:function(){!function(e,t){var a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"comments/delete/".concat(e);g.a.delete(a,{headers:_e}).then((function(e){t(e)})).catch((function(e){return console.log(e)}))}(c,(function(e){Ie(l,(function(e){a(e)}))}))},setIsDeleteMode:w}))},Me=(a(102),a(129)),Ve=function(e){var t=e.comments,a=e.setComments,n=t.map((function(e){return r.a.createElement(xe,{key:Object(Me.a)(),comment:e,setComments:a})}));return r.a.createElement("div",{className:"CommentsContainer"},r.a.createElement("hr",null),0===t.length&&"There are no comments on this post. Be the first to comment!",n)},Be=(a(103),function(e){var t=k((function(){!function(e,t,a,n){var r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"comments/newComment",c={habit_id:e,content:t,is_edited:a};g.a.post(r,c,de).then((function(e){n()})).catch((function(e){return console.log(e)}))}(e.habit_id,n.content,!1,(function(){s(),e.handleExpandComments(null,!0)}))})),a=Object(h.a)(t,4),n=a[0],c=a[1],o=a[2],s=a[3],l=Object(i.c)((function(e){return e.user}));return r.a.createElement("form",{onSubmit:o,className:"CommentForm__container"},r.a.createElement("img",{className:"CommentForm__avatar",src:l.avatar_url}),r.a.createElement("input",{ref:e.commentField,autoComplete:"off",name:"content",value:n.content||"",onChange:c,className:"CommentForm__comment-input",placeholder:"Leave a comment..."}))}),Ge=(a(104),function(e){var t=e.user_id,a=e.habit_id,n=e.dispatch,c=e.closeModal,o=e.title,i=Ee(""),s=Object(h.a)(i,3),l=s[0],u=s[1];s[2];return r.a.createElement("div",{className:"DeleteConfirmation"},r.a.createElement(p.a,{close:!0,onClick:c}),r.a.createElement("span",{className:"DeleteConfirmation__prompt"},"Are you sure you want to delete?",r.a.createElement("i",{className:"DeleteConfirmation__prompt"},"Once a habit is deleted, all data is lost and cannot be recovered.")),r.a.createElement("hr",null),r.a.createElement("span",{className:"DeleteConfirmation__prompt"},'Please type "',r.a.createElement("i",{className:"DeleteConfirmation__keyword"},"   ",o),'" to delete.'),r.a.createElement("div",{className:"flush-height"},r.a.createElement("input",{className:"DeleteConfirmation__input",value:l,onChange:u.onChange}),r.a.createElement(p.a,{className:"DeleteConfirmation__button",color:"danger",onClick:function(e){return ke(e,t,a,n)},disabled:o!==l},"DELETE")))}),qe=(a(105),function(e){var t=e.habit,a=t.habit_id,c=t.title,o=t.description,s=t.created_at,l=(t.last_completed_at,t.last_broken_at,t.is_edited),u=t.user_id,m=Object(n.useState)([]),d=Object(h.a)(m,2),_=d[0],E=d[1],f=Object(n.useState)(!1),b=Object(h.a)(f,2),O=b[0],p=b[1],v=Object(n.useState)(!1),C=Object(h.a)(v,2),S=C[0],T=C[1],P=Object(n.useState)([]),j=Object(h.a)(P,2),N=(j[0],j[1]),w=Object(n.useState)(""),A=Object(h.a)(w,2),D=A[0],R=A[1],y=Object(n.useState)(""),L=Object(h.a)(y,2),H=L[0],U=L[1],k=Object(n.useState)(""),W=Object(h.a)(k,2),I=W[0],K=W[1],F=Object(n.useState)(""),x=Object(h.a)(F,2),M=x[0],V=x[1],B=Object(n.useState)([]),G=Object(h.a)(B,2),q=G[0],z=G[1],J=Object(n.useState)(!1),X=Object(h.a)(J,2),Y=X[0],$=X[1],Q=Object(n.useState)(!1),Z=Object(h.a)(Q,2),ee=Z[0],te=Z[1],ae=Object(n.useState)(!1),ne=Object(h.a)(ae,2),oe=ne[0],ie=ne[1],le=Object(n.useRef)(),_e=Object(i.b)(),Ee=Object(i.c)((function(e){return e.counter})),fe=Object(i.c)((function(e){return e.user})),be=De()({liked:S});Object(n.useEffect)((function(){Ie(a,(function(e){z(e)}))}),[]),Object(n.useEffect)((function(){se(u,a,(function(e){console.log(e),E(e)}))}),[Ee]);var Oe=Object(i.c)((function(e){return e.user.user_id}));Object(n.useEffect)((function(){t.user_id===Oe&&p(!0),We(u,a,(function(e){R(e.length),N(e);var t,a=Object(re.a)(e);try{for(a.s();!(t=a.n()).done;){if(t.value.liked_by===fe.user_id)return void T(!0)}}catch(H){a.e(H)}finally{a.f()}T(!1)}))}),[Ee]),Object(n.useEffect)((function(){ce(u,(function(e){K(e.username)}))}),[]);var pe=function(e,t){if(e&&e.preventDefault(),!t&&oe)return ie(!1);Ie(a,(function(e){z(e),ie(!0)}))};return r.a.createElement("div",{className:"HabitCard"},r.a.createElement("div",{className:"HabitCard__container"},r.a.createElement(Ue,{habit_id:a,user_id:u,completedAt:_,setSuccess:V,setErr:U}),r.a.createElement("div",{className:"HabitCard__data-container"},r.a.createElement("h4",{className:"HabitCard__title"},c),r.a.createElement("span",{className:"HabitCard__description"},ee&&r.a.createElement(ve,{setSuccess:V,setErr:U,habit_id:a,setEditMode:te,description:o,title:c}),o||r.a.createElement("i",null,"No description provided.")),r.a.createElement("h5",{className:"HabitCard__created-at"},"Created at ",ue(s)," by @",I),l&&r.a.createElement("span",{className:"HabitCard__edited-span"},"(edited)"),H&&r.a.createElement(ge.a,{color:"danger",className:"HabitCard__err-msg"},H),M&&r.a.createElement(ge.a,{color:"success",className:"HabitCard__success-msg"},M)),r.a.createElement("footer",{className:"HabitCard__footer"},D>0&&r.a.createElement("span",{className:"HabitCard__likes-span ".concat(be)},"".concat(D," ").concat(me(D,"like"))),r.a.createElement("button",{className:be,onClick:function(e){e.preventDefault(),function(e,t,a,n){var r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"habits/likes",c={liked_by:e.user_id,habit_by:t,habit_id:a};g.a.post(r,c,de).then((function(e){n(e.data)})).catch((function(e){console.log(e),n(null,e)}))}(fe,u,a,(function(e,t){if(!t){switch(e.action){case"LIKED":R((function(e){return e+1}));break;case"UNLIKED":R((function(e){return e-1}))}T(!S)}}))}},S?"unlike":"like"),r.a.createElement("button",{className:"HabitCard__view-comment-btn",onClick:0===q.length?function(e){e.preventDefault(),le.current.focus()}:pe},oe?"close comments":0===q.length?"comment":"view ".concat(q.length," ").concat(me(q.length,"comment"))),r.a.createElement(Be,{commentField:le,handleExpandComments:pe,habit_id:a})),O&&!ee&&r.a.createElement("button",{onClick:function(e){e.preventDefault(),$(!0)},className:"HabitCard__delete-btn"},"delete"),O&&!ee&&r.a.createElement("button",{onClick:function(e){e.preventDefault(),te(!0)},className:"HabitCard__edit-btn"},"edit")),Y&&r.a.createElement(Ge,{closeModal:function(){return $(!1)},user_id:u,habit_id:a,dispatch:_e,title:c}),oe&&r.a.createElement(Ve,{setComments:z,comments:q}))}),ze=(a(106),function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=t[0],c=t[1],o=Object(i.c)((function(e){return e.user.user_id})),s=Object(i.c)((function(e){return e.counter}));Object(n.useEffect)((function(){!function(e,t){var a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"habits/".concat(e);g.a.get(a).then((function(e){return t(e.data)})).catch((function(e){return console.log(e)}))}(o,(function(e){c(e)}))}),[s]);var l=a.map((function(e){return r.a.createElement(qe,{key:e.habit_id,habit:e})}));return r.a.createElement("div",{className:"CardsContainer"},l,r.a.createElement("button",{onClick:function(e){e.preventDefault(),console.log(a)}},"click"))}),Je=(a(107),function(){var e=Object(i.c)((function(e){return e.isLogged})),t=Object(i.b)(),a=(Object(i.c)((function(e){return e.counter})),Object(i.c)((function(e){return e.user}))),c=(a.first_name,a.last_name,a.username),o=(a.email,a.user_id);return Object(n.useEffect)((function(){d(t)}),[]),e?r.a.createElement("div",{className:"HomePage"},r.a.createElement("h2",{className:"HomePage__welcome-prompt"},"Welcome to your dashboard, ","".concat(c),"!"),r.a.createElement("div",{className:"HomePage__secondary-dashboard"},a&&r.a.createElement(he,{userObj:a}),r.a.createElement(we,null)),o&&r.a.createElement(ze,null)):r.a.createElement(v.a,{to:"/"})}),Xe=(a(108),function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),i=Object(h.a)(o,2),s=i[0],l=i[1],d=Object(n.useState)(!1),_=Object(h.a)(d,2),E=_[0],f=_[1];Object(n.useEffect)((function(){f(!0),b((function(e){f(!1),l(e)}))}),[]);var b=function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TEST:"Production mode!"}).REACT_APP_API+"search/explore",g.a.get(a).then((function(e){t(e.data)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=a.map((function(e){return r.a.createElement(he,{key:e.user_id,userObj:e})})),v=s.map((function(e){return r.a.createElement(he,{key:e.user_id,userObj:e})}));return r.a.createElement("section",{className:"SearchPage"},r.a.createElement("h3",null,"Search for other users to follow"),r.a.createElement("div",{className:"SearchPage__top-div"},r.a.createElement(ne,{setIsLoading:f,setQueryHits:c}),r.a.createElement(p.a,{color:"warning",onClick:function(e){e.preventDefault(),f(!0),b((function(e){f(!1),l(e)}))},className:"SearchPage__refresh-button"},"refresh")),E&&r.a.createElement(L.a,{className:"SearchPage__spinner"}),O,0===O.length&&v)}),Ye=(a(109),a(127)),$e=function(){var e=Object(n.useState)({}),t=Object(h.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),s=Object(h.a)(o,2),l=s[0],u=s[1],m=Object(n.useState)([]),d=Object(h.a)(m,2),_=d[0],E=d[1],f=Object(n.useState)([]),b=Object(h.a)(f,2),O=b[0],v=b[1],C=Object(n.useState)("Habits"),S=Object(h.a)(C,2),T=S[0],g=S[1],P=Object(i.c)((function(e){return e.counter})),j=window.location.href.split("users/")[1];Object(n.useEffect)((function(){console.log("On mount user_id",j),ce(j,(function(e){c(e)})),ie(j,(function(e){u(e)}))}),[P]);var N=function(e){if(e.preventDefault(),e.target.innerHTML!==T)switch(console.log(e.target.innerHTML),e.target.innerHTML){case"Habits":g("Habits"),ie(j,(function(e){u(e)}));break;case"Followers":g("Followers"),Ce(j,(function(e){console.log("followers:",e),E(e)}));break;case"Following":g("Following"),Se(j,(function(e){console.log("following:",e),v(e)}))}},w=function(){switch(T){case"Habits":return l.map((function(e){return r.a.createElement(qe,{key:Object(Me.a)(),habit:e})}));case"Followers":return _.map((function(e){return r.a.createElement(he,{key:Object(Me.a)(),userObj:e})}));case"Following":return O.map((function(e){return r.a.createElement(he,{key:Object(Me.a)(),userObj:e})}))}}();return 0===w.length&&(w=function(){switch(T){case"Habits":return r.a.createElement("div",{className:"UserPage__no-habits"},"This user has no habits yet.");case"Followers":return r.a.createElement("div",{className:"UserPage__no-habits"},"This user has no followers yet.");case"Following":return r.a.createElement("div",{className:"UserPage__no-habits"},"This user is not following anyone yet.")}}()),r.a.createElement("section",{className:"UserPage"},r.a.createElement(he,{userObj:a}),r.a.createElement(Ye.a,{className:"UserPage__button-group"},r.a.createElement(p.a,{color:"Habits"===T?"primary":"secondary",onClick:N},"Habits"),r.a.createElement(p.a,{color:"Followers"===T?"primary":"secondary",onClick:N},"Followers"),r.a.createElement(p.a,{color:"Following"===T?"primary":"secondary",onClick:N},"Following")),w)},Qe=function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=t[0],c=t[1],o=Object(i.c)((function(e){return e.user}));Object(n.useEffect)((function(){Se(o.user_id,(function(e){c(e)}))}),[]);var s=a.map((function(e){return r.a.createElement(he,{key:Object(Me.a)(),userObj:e})}));return r.a.createElement("div",{className:"FollowingPage navbar-offset"},r.a.createElement("h3",null,0===a.length?"You are not following anyone.":"Here are the users you follow!"),s)},Ze=(a(110),function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=t[0],c=t[1],o=Object(i.c)((function(e){return e.user}));Object(n.useEffect)((function(){Ce(o.user_id,(function(e,t){if(t)return console.log(t);c(e)}))}),[]);var s=a.map((function(e){return r.a.createElement(he,{key:e.user_id,userObj:e})}));return r.a.createElement("section",{className:"navbar-offset"},r.a.createElement("h3",null,0===a.length?"You do not have any followers yet.":"Here are your followers!"),s)});a(111);var et=function(){var e=Object(i.b)();return Object(n.useEffect)((function(){console.log("Fetching user data from local storage..."),d(e)}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(O.a,null,r.a.createElement(S,null),r.a.createElement(v.b,{exact:!0,path:"/",component:je}),r.a.createElement(v.b,{exact:!0,path:"/welcome",component:je}),r.a.createElement(v.b,{exact:!0,path:"/signup",component:Te}),r.a.createElement(v.b,{exact:!0,path:"/login",component:Pe}),r.a.createElement(ae,{path:"/home"},r.a.createElement(Je,null)),r.a.createElement(ae,{path:"/test"},r.a.createElement(_,null)),r.a.createElement(ae,{path:"/search-users"},r.a.createElement(Xe,null)),r.a.createElement(ae,{path:"/users"},r.a.createElement($e,null)),r.a.createElement(ae,{path:"/following"},r.a.createElement(Qe,null)),r.a.createElement(ae,{path:"/my-followers"},r.a.createElement(Ze,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(112);var tt=a(21),at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INCREMENT":return e+t.payload;case"DECREMENT":return e-t.payload;default:return e}},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return!0;case"LOGOUT":return!1;default:return e}},rt={msg:{},status:null,id:null},ct={token:localStorage.getItem("token"),isAuthenticated:null,isLoading:!1,user:null},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return Object(U.a)(Object(U.a)({},e),{},{isLoading:!0});case"USER_LOADED":return Object(U.a)(Object(U.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:t.payload});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return Object(U.a)(Object(U.a)(Object(U.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT_SUCCESS":case"REGISTER_FAIL":return localStorage.removeItem("token"),Object(U.a)(Object(U.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:return e}},it={username:null,first_name:null,last_name:null,email:null,created_at:null,avatar_url:null},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.payload;case"CLEAR_USER":return it;default:return e}},lt=Object(tt.b)({counter:at,isLogged:nt,error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return{msg:t.payload.msg,status:t.payload.status,id:t.pauload.id};case"CLEAR_ERRORS":return{msg:{},status:null,id:null};default:return e}},auth:ot,user:st}),ut=Object(tt.c)(lt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:ut},r.a.createElement(et,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,t,a){e.exports=a(113)},56:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[51,1,2]]]);
//# sourceMappingURL=main.a3261e69.chunk.js.map